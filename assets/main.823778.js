
jQuery.fn.exists=function(){return this.length>0;};jQuery.isjQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof jQuery;};jQuery.fn.serializeObject=function(options){options=$.extend({},options);var self=this,json={},push_counters={},patterns={"validate":/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,"key":/[a-zA-Z0-9_]+|(?=\[\])/g,"push":/^$/,"fixed":/^\d+$/,"named":/^[a-zA-Z0-9_]+$/};this.build=function(base,key,value){base[key]=value;return base;};this.push_counter=function(key,i){if(push_counters[key]===undefined){push_counters[key]=0;}
if(i===undefined){return push_counters[key]++;}else if(i!==undefined&&i>push_counters[key]){return push_counters[key]=++i;}};$.each($(this).serializeArray(),function(){if(!patterns.validate.test(this.name)){return;}
var k,keys=this.name.match(patterns.key),merge=this.value,reverse_key=this.name;while((k=keys.pop())!==undefined){reverse_key=reverse_key.replace(new RegExp("\\["+k+"\\]$"),'');if(k.match(patterns.push)){merge=self.build([],self.push_counter(reverse_key),merge);}else if(k.match(patterns.fixed)){self.push_counter(reverse_key,k);merge=self.build([],k,merge);}else if(k.match(patterns.named)){merge=self.build({},k,merge);}}
json=$.extend(true,json,merge);});return json;};jQuery.fn.switchContext=function(obj){return $(obj);};(function(Date,undefined){var origParse=Date.parse,numericKeys=[1,4,5,6,7,10,11];Date.parse=function(date){var timestamp,struct,minutesOffset=0;if((struct=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(date))){for(var i=0,k;(k=numericKeys[i]);++i){struct[k]=+struct[k]||0;}
struct[2]=(+struct[2]||1)-1;struct[3]=+struct[3]||1;if(struct[8]!=='Z'&&struct[9]!==undefined){minutesOffset=struct[10]*60+struct[11];if(struct[9]==='+'){minutesOffset=0-minutesOffset;}}
timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7]);}
else{timestamp=origParse?origParse(date):NaN;}
return timestamp;};}(Date));(function(Date){if(!Date.toISOString){Date.toISOString=function(){function pad(n){return n<10?'0'+n:n;}
return this.getUTCFullYear()+'-'+
pad(this.getUTCMonth()+1)+'-'+
pad(this.getUTCDate())+'T'+
pad(this.getUTCHours())+':'+
pad(this.getUTCMinutes())+':'+
pad(this.getUTCSeconds())+'Z';};}}(Date));var Geoloqi=Geoloqi||{};Geoloqi.module=function(ns_string,module){var parts=ns_string.split('.'),parent=Geoloqi,pl,i;if(parts[0]=="Geoloqi"){parts=parts.slice(1);}
pl=parts.length;for(i=0;i<pl;i++){if(i==pl-1&&module){parent[parts[i]]=module();}else if(typeof parent[parts[i]]=='undefined'){parent[parts[i]]={};}
parent=parent[parts[i]];}
return parent;};Geoloqi.log=function(){Geoloqi.logs=Geoloqi.logs||[];Geoloqi.logs.push(arguments);if(window.console){console.log(Array.prototype.slice.call(arguments));}};(function(i){var n=function(){var f=function(){};f.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(a,b,c,d){if(!d){this.context=b;this.buffer=[]}if(!this.includes("",a))if(d)return a;else{this.send(a);return}a=this.render_pragmas(a);a=this.render_section(a,b,c);if(d)return this.render_tags(a,b,c,d);this.render_tags(a,b,c,d)},send:function(a){a!=""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this;return a.replace(RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag),function(c,d,e){if(!b.pragmas_implemented[d])throw{message:"This implementation of mustache doesn't understand the '"+d+"' pragma"};b.pragmas[d]={};if(e){c=e.split("=");b.pragmas[d][c[0]]=c[1]}return""})},render_partial:function(a,b,c){a=this.trim(a);if(!c||c[a]===undefined)throw{message:"unknown_partial '"+a+"'"};if(typeof b[a]!="object")return this.render(c[a],b,c,true);return this.render(c[a],b[a],c,true)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this;return a.replace(RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(e,j,k,h){e=d.find(k,b);if(j=="^")return!e||d.is_array(e)&&e.length===0?d.render(h,b,c,true):"";else if(j=="#")return d.is_array(e)?d.map(e,function(g){return d.render(h,d.create_context(g),c,true)}).join(""):d.is_object(e)?d.render(h,d.create_context(e),c,true):typeof e==="function"?e.call(b,h,function(g){return d.render(g,b,c,true)}):e?d.render(h,b,c,true):""})},render_tags:function(a,b,c,d){var e=this,j=function(){return RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},k=j(),h=function(o,m,l){switch(m){case"!":return"";case"=":e.set_delimiters(l);k=j();return"";case">":return e.render_partial(l,b,c);case"{":return e.find(l,b);default:return e.escape(e.find(l,b))}};a=a.split("\n");for(var g=0;g<a.length;g++){a[g]=a[g].replace(k,h,this);d||this.send(a[g])}if(d)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){a=this.trim(a);var c;if(b[a]===false||b[a]===0||b[a])c=b[a];else if(this.context[a]===false||this.context[a]===0||this.context[a])c=this.context[a];if(typeof c==="function")return c.apply(b);if(c!==undefined)return c;return""},includes:function(a,b){return b.indexOf(this.otag+a)!=-1},escape:function(a){a=String(a===null?"":a);return a.replace(/&(?!\w+;)|["<>\\]/g,function(b){switch(b){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return b}})},create_context:function(a){if(this.is_object(a))return a;else{var b=".";if(this.pragmas["IMPLICIT-ITERATOR"])b=this.pragmas["IMPLICIT-ITERATOR"].iterator;var c={};c[b]=a;return c}},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if(typeof a.map=="function")return a.map(b);else{for(var c=[],d=a.length,e=0;e<d;e++)c.push(b(a[e]));return c}}};return{name:"mustache.js",version:"0.3.0",to_html:function(a,b,c,d){var e=new f;if(d)e.send=d;e.render(a,b,c);if(!d)return e.buffer.join("\n")}}}();window.ich=new function(){var f=this;f.VERSION="0.9";f.templates={};f.partials={};f.addTemplate=function(a,b){if(f[a])throw"Invalid name: "+a+".";if(f.templates[a])throw'Template " + name + " exists';f.templates[a]=b;f[a]=function(c,d){c=c||{};var e=n.to_html(f.templates[a],c,f.partials);return d?e:i(e)}};f.addPartial=function(a,b){if(f.partials[a])throw'Partial " + name + " exists';else f.partials[a]=b};f.grabTemplates=function(){i('script[type="text/html"]').each(function(a,b){var c=i(typeof a==="number"?b:a),d="".trim?c.html().trim():i.trim(c.html());f[c.hasClass("partial")?"addPartial":"addTemplate"](c.attr("id"),d);c.remove()})};f.clearAll=function(){for(var a in f.templates)delete f[a];f.templates={};f.partials={}};f.refresh=function(){f.clearAll();f.grabTemplates()}};i(function(){ich.grabTemplates()})})(window.jQuery||window.Zepto);(function($){var defaults={format:"%dd:%hh:%mm:%ss",displayZeros:true,tick:990};var patterns=[/%ss/,/%mm/,/%hh/,/%dd/,/%s/,/%m/,/%h/,/%d/,/%SECONDS/,/%MINUTES/,/%HOURS/,/%DAYS/];function calcage(secs,num1,num2){return((Math.floor(secs/num1))%num2);}
function addLeadingZeros(number,length){var str=''+number;while(str.length<length){str='0'+str;}
return str;}
function pluralize(count,singular,plural){if(plural===null){plural=singular+'s';}
if(count===0){return"";}
return(count<=1?singular:plural);}
function humanTime(seconds){var text="";var minutes=Math.floor(seconds/60);if(seconds<=10){text='just now';}else
if(seconds<=59){text=seconds+' seconds ago';}else
if(minutes===1){text='a minute ago';}else
if(minutes<45){text=minutes+' minutes ago';}else
if(minutes<90){text='about 1 hour ago';}else
if(minutes<1440){text='about '+Math.floor(minutes/60)+' hours ago';}else
if(minutes<2880){text='1 day ago';}else
if(minutes<43200){text=Math.floor(minutes/1440)+' days ago';}else
if(minutes<86400){text='about 1 month ago';}else
if(minutes<525960){text=Math.floor(minutes/43200)+' months ago';}else
if(minutes<1051199){text='about 1 year ago';}else{text='Over '+Math.floor(minutes/525960)+' years ago';}
return text;}
function formatTime(secondsRemaining,format,displayZeros){var remaining={days:calcage(secondsRemaining,86400,100000),hours:calcage(secondsRemaining,3600,24),minutes:calcage(secondsRemaining,60,60),seconds:calcage(secondsRemaining,1,60)};var replacements=[addLeadingZeros(remaining.seconds,2),addLeadingZeros(remaining.minutes,2),addLeadingZeros(remaining.hours,2),addLeadingZeros(remaining.days,2),remaining.seconds,remaining.minutes,remaining.hours,remaining.days,pluralize(remaining.seconds,"second"),pluralize(remaining.minutes,"minute"),pluralize(remaining.hours,"hour"),pluralize(remaining.days,"day")];var text=format;for(i=0;i<=patterns.length-1;i++){notZero=!!(parseInt(replacements[i]));isString=(typeof replacements[i]=="string");if(displayZeros){tmp=text.replace(patterns[i],replacements[i]);}else if(notZero){tmp=text.replace(patterns[i],replacements[i]);}else if(isString){tmp=text.replace(patterns[i],replacements[i]);}else{tmp=text.replace(patterns[i],"");}
text=tmp;}
return text;}
var methods={init:function(options){var settings=$.extend({},defaults,options);return this.each(function(){var $this=$(this),self=$this,data=$this.data('relative');if(data){$this.removeData('relative');}
setupData={target:$this,options:settings,time:new Date(Date.parse($(this).attr('datetime')))};if(settings.tick>0){setupData.timer=setInterval(function(){self.relative('update');},settings.tick);}
$this.data('relative',setupData);$this.relative('update');});},update:function(){var $this=$(this),self=$this,data=$this.data('relative');return this.each(function(){if(data){var then=data.time;var now=new Date();var diff;if(now.valueOf()>then.valueOf()){diff=now.valueOf()-then.valueOf();}else{diff=then.valueOf()-now.valueOf();}
var seconds=Math.floor(diff/1000);if(data.options.format=="human"){$(this).text(humanTime(seconds));}else{$(this).text(formatTime(seconds,data.options.format,data.options.displayZeros));}}});},start:function(){return this.each(function(){var $this=$(this),self=$this,data=$this.data('countdown');if(data.timer){clearInterval(data.timer);}
data.timer=setInterval(function(){self.relative('update');},data.options.tick);});},destroy:function(){return this.each(function(){var data=$(this).data('countdown');clearInterval(data.timer);$this.removeData();});},stop:function(){return this.each(function(){var data=$(this).data('countdown');clearInterval(data.timer);});}};$.fn.relative=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.relative');}};})(jQuery);$(function(){$('time[data-relativize]').each(function(){var format=$(this).data('relativize')||"%dd:%hh:%mm:%ss";tick=(typeof $(this).data('relativize-tick')!="undefined")?$(this).data('relativize-tick'):990;$(this).relative({format:format,tick:tick});});});(function(Date,undefined){var origParse=Date.parse,numericKeys=[1,4,5,6,7,10,11];Date.parse=function(date){var timestamp,struct,minutesOffset=0;if((struct=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(date))){for(var i=0,k;(k=numericKeys[i]);++i){struct[k]=+struct[k]||0;}
struct[2]=(+struct[2]||1)-1;struct[3]=+struct[3]||1;if(struct[8]!=='Z'&&struct[9]!==undefined){minutesOffset=struct[10]*60+struct[11];if(struct[9]==='+'){minutesOffset=0-minutesOffset;}}
timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7]);}
else{timestamp=origParse?origParse(date):NaN;}
return timestamp;};}(Date));jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt)
{var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0)
from+=len;for(;from<len;from++)
{if(from in this&&this[from]===elt)
return from;}
return-1;};}
jQuery(document).ready(function($){Geoloqi=Geoloqi||{};Geoloqi.isLoggedIn=$("#user-dropdown-menu").data("loggedin")===true;Geoloqi.username=$("#user-dropdown-menu").data("username");if($("#vegancheese").length==1){$('#error_email_form').submit(function(){$('#vegancheese').val('galaxy');return true;});}});$('#load-more').live("click",function(){Pagination.loadMore(this);return false;});$('.alert-message .close, .alert .close, .flash .close').live("click",function(){$(this).parent().slideUp("fast",function(){$(this).remove();});return false;});